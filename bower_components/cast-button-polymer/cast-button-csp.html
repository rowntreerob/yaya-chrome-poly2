<!--
Copyright 2014 Google Inc. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
--><html><head><link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-signals/iron-signals.html">
<!-- <link rel="import" href="../core-tooltip/core-tooltip.html"> -->

<link href="//fonts.googleapis.com/css?family=Roboto:400,100" rel="stylesheet" type="text/css">

<!-- Represents the Chromecast button.  It handles both rendering the button and the
connection/actions for Chromecast.

You can change the size using the css selector [element css selector]::shadow svg and setting
height and width.  The cast image is handled by SVG so it'll scale nicely.

The button automatically hides when Chromecast isn't detected.

The button animates during the connection process.

To send play requests use the castManager functions.  This element then receives the events
fired by castManager and based on the sender determines the appropriate action.

When defining the element, appId and castManager are required.  The background color of the element
 can also be set as white or black.  Finally animationInterval can be set to change the animation
 rate of the connection animation.

This element will also sync local state with the chromecast state via castManager method calls.
-->
</head><body><dom-module id="cast-button">
 
     <style>
      :host {
        margin-top: 5px;
        margin-left: 34px;
        display: block;
        overflow: visible;
      }

      .hidden {
        display: none;
      }

      svg {
        width: 34px;
        height: 25px;
        outline: 0;
        border: 0;
      }

      #button_cast:hover {
        cursor: pointer;
        opacity: 0.6;
        filter: alpha(opacity=60);
      }

      .button-black {
        fill: black;
      }

      .button-white {
        fill: white;
      }

      svg.connected {
        fill: #00B9E7;
      }

      core-tooltip.fancy::shadow .core-tooltip {
        opacity: 0;
        filter: alpha(opacity=0);
        -webkit-transition: all 300ms cubic-bezier(0, 1.07, .99, 1.92);
        transition: all 300ms cubic-bezier(0, 1.07, .99, 1.92);
        -webkit-transform: translate3d(0, 10px, 0);
        transform: translate3d(0, 10px, 0);
        font-size: 1.3em;
        font-family: 'Roboto', sans-serif;
        font-weight: 100;
      }

      core-tooltip.fancy:hover::shadow .core-tooltip,
      core-tooltip.fancy:focus::shadow .core-tooltip {
        opacity: 1;
        filter: alpha(opacity=100);
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
      }

      core-tooltip.fancy::shadow .top {
        margin-bottom: 20px;
      }

      core-tooltip.fancy::shadow .core-tooltip.show {
        opacity: 1;
        filter: alpha(opacity=100);
        -webkit-transform: translate3d(0, 0, 0);
        transform: translate3d(0, 0, 0);
      }
    </style>
 
  <template>


      <svg version="1.1" id="button_cast" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" class="{{color == 'white' ? 'button-white' : 'button-black'}}
         {{castManager.isCasting ? 'connected' : ''}}
         {{display ? '': 'hidden'}}" viewBox="0 0 51 39" enable-background="new 0 0 51 39" xml:space="preserve">
    <g id="cast_x5F_icon_x5F_on_x5F_light_x5F_mono_1_">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M3,0v16.5c1.4,0.3,2.7,0.7,4,1.2V4h40v28H21.3
        c0.5,1.3,0.9,2.6,1.2,4H51V0H3z"></path>
      <path visibility="{{castManager.isCasting ? 'visibile' : 'hidden'}}" fill-rule="evenodd" clip-rule="evenodd" d="M10,7v12.1c4.2,2.3,7.6,5.8,9.9,9.9H44V7H10z"></path>
      <path fill="{{connectingCounter == 0 ? '#00B9E7' : ''}}" d="M0,33.3V39h5.7C5,36.2,2.8,34,0,33.3z"></path>
      <path fill="{{connectingCounter == 1 ? '#00B9E7' : ''}}" d="M0,26.1v4C4.5,31,8,34.5,8.8,39h4C12,32.3,6.7,27,0,26.1z"></path>
      <path fill="{{connectingCounter == 2 ? '#00B9E7' : ''}}" d="M0,19.1v4C8.3,24,15,30.7,15.9,39h4C19,28.4,10.6,20,0,19.1z"></path>
    </g>
    </svg>
    
    
    <iron-signals on-iron-signal-media-action="mediaActionHandler"></iron-signals>
    
  </template>
  </dom-module>
  
  <script src="cast-button-csp.js"></script></body></html>